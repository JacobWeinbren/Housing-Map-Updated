---

---

<div id="map-container" style="height: 100vh"></div>
<div id="geocoder" class="geocoder fixed top-4 left-4 z-10"></div>

<script>
	import { MapboxOverlay as DeckOverlay } from "@deck.gl/mapbox";
	import { ScatterplotLayer } from "@deck.gl/layers";
	import GL from "@luma.gl/constants";
	import mapboxgl from "mapbox-gl";
	import MapboxGeocoder from "@mapbox/mapbox-gl-geocoder";

	// Mapbox Access Token and Style
	const MAPBOX_TOKEN = import.meta.env.PUBLIC_MAPBOX_TOKEN;
	const MAPBOX_STYLE = "mapbox://styles/mapbox/dark-v11";

	// Initialize the map
	export const map = new mapboxgl.Map({
		container: "map-container",
		style: MAPBOX_STYLE,
		center: [-3.435973, 51.355518],
		zoom: 5.5,
		projection: {
			name: "mercator",
		},
		accessToken: MAPBOX_TOKEN,
	});

	// Add geocoder/search box
	const geocoder = new MapboxGeocoder({
		accessToken: MAPBOX_TOKEN,
		mapboxgl: mapboxgl,
	});

	const geocoderElement = document.getElementById("geocoder");
	if (geocoderElement) {
		geocoderElement.appendChild(geocoder.onAdd(map));
	}
</script>
